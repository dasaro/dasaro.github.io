<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
  <meta name="description" content="Research projects by Fabio Aurelio D'Asaro - Current and past funded research initiatives.">
  <meta name="author" content="Fabio Aurelio D'Asaro">

  <title>Projects - Fabio Aurelio D'Asaro</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/responsive.css">

</head>
<body data-page="projects">
  <!-- Mathematical Background Canvas -->
  <canvas id="bg-animation-canvas" data-default-animation="gameOfLife"></canvas>
  <button id="animation-toggle" class="animation-toggle" aria-label="Toggle background animation" title="Toggle animation (A)">
    <span class="symbol">∀</span>
  </button>

  <!-- Navigation (dynamically injected by navigation.js) -->
  <div id="nav-placeholder"></div>

  <!-- Main Content -->
  <main>
    <section id="projects">
      <div class="container">
        <h1 class="fade-in">Research Projects</h1>

        <!-- Current Projects -->
        <div id="current-projects">
          <h2 class="section-title"><span class="logical-symbols symbols-dimmed"></span> Current Projects</h2>
          <div id="current-projects-container">
            <p class="loading-message">Loading current projects...</p>
          </div>
        </div>

        <!-- Past Projects -->
        <div id="past-projects" class="mt-xl">
          <h2 class="section-title"><span class="logical-symbols symbols-dimmed"></span> Past Projects</h2>
          <div id="past-projects-container">
            <p class="loading-message">Past projects will be loaded from data/projects.json</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-text">
        <p>&copy; <span class="footer-year">2025</span> <span id="footer-name">Loading...</span></p>
        <p>∀x (Logic(x) → Elegant(x))</p>
      </div>
      <ul class="footer-links">
        <li><a href="https://github.com/dasaro" target="_blank" rel="noopener">GitHub</a></li>
        <li><a href="https://scholar.google.com" target="_blank" rel="noopener">Google Scholar</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>
  </footer>

  <!-- Scripts -->
    <script src="js/navigation.js?v=31"></script>
  <script src="js/main.js?v=31"></script>
  <script type="module" src="js/animations/AnimationController.js?v=31"></script>
  <script src="js/logical-symbols.js?v=31"></script>

  <!-- Page-specific script -->
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // Load projects data
        const projectsData = await loadJSON('./data/projects.json');
        console.log('[projects.html] Projects data loaded:', projectsData);

        // Current Projects (using CSS classes)
        const currentContainer = document.getElementById('current-projects-container');
        if (projectsData.current && projectsData.current.length > 0) {
          const currentHTML = projectsData.current.map(project => `
            <div class="project-card current">
              <div class="chip-group">
                <span class="chip chip-year chip-sm">${project.year_start}–${project.year_end}</span>
                <span class="chip chip-current chip-sm">Active</span>
                <span class="chip chip-research chip-sm">Research</span>
              </div>
              <h3>${project.name}</h3>
              <div class="project-meta">
                <strong>Funding:</strong> ${project.funding}
              </div>
              ${project.id ? `
                <div class="project-meta">
                  <strong>ID:</strong> ${project.id}
                </div>
              ` : ''}
              ${project.ids ? `
                <div class="project-meta">
                  <strong>IDs:</strong> ${project.ids}
                </div>
              ` : ''}
              <div class="project-meta">
                <strong>Role:</strong> ${project.role}
              </div>
              <div class="project-meta">
                <strong>Period:</strong> ${project.year_start}–${project.year_end}
              </div>
              <div class="project-meta">
                <strong>Institution:</strong> ${project.institution}
              </div>
              ${project.spoke ? `
                <div class="project-meta">
                  <strong>Spoke:</strong> ${project.spoke}
                </div>
              ` : ''}
              ${project.pi ? `
                <div class="project-meta">
                  <strong>PI:</strong> ${project.pi}
                </div>
              ` : ''}
              ${project.cup ? `
                <div class="project-meta">
                  <strong>CUP:</strong> ${project.cup}
                </div>
              ` : ''}
              <p class="project-description">
                ${project.description}
              </p>
              ${project.outputs && project.outputs.length > 0 ? `
                <div class="project-outputs">
                  <strong>Outputs:</strong>
                  <ul>
                    ${project.outputs.map(output => `
                      <li>${output}</li>
                    `).join('')}
                  </ul>
                </div>
              ` : ''}
              ${project.website ? `
                <div>
                  <a href="${project.website}" target="_blank" rel="noopener" class="project-link">
                    → Project Website
                  </a>
                </div>
              ` : ''}
            </div>
          `).join('');
          currentContainer.innerHTML = currentHTML;
          console.log('[projects.html] ✅ Current projects displayed!', projectsData.current.length, 'projects');
        } else {
          currentContainer.innerHTML = '';
          console.log('[projects.html] ℹ️ No current projects found');
        }

        // Past Projects (using CSS classes)
        const pastContainer = document.getElementById('past-projects-container');
        if (projectsData.past && projectsData.past.length > 0) {
          const pastHTML = projectsData.past.map(project => `
            <div class="project-card">
              <div class="chip-group">
                <span class="chip chip-year chip-sm">${project.year_start}–${project.year_end}</span>
                <span class="chip chip-completed chip-sm">Completed</span>
                <span class="chip chip-research chip-sm">Research</span>
              </div>
              <h3>${project.name}</h3>
              <div class="project-meta">
                <strong>Funding:</strong> ${project.funding}
              </div>
              ${project.id ? `
                <div class="project-meta">
                  <strong>ID:</strong> ${project.id}
                </div>
              ` : ''}
              ${project.ids ? `
                <div class="project-meta">
                  <strong>IDs:</strong> ${project.ids}
                </div>
              ` : ''}
              <div class="project-meta">
                <strong>Role:</strong> ${project.role}
              </div>
              <div class="project-meta">
                <strong>Period:</strong> ${project.year_start}–${project.year_end}
              </div>
              <div class="project-meta">
                <strong>Institution:</strong> ${project.institution}
              </div>
              ${project.sector ? `
                <div class="project-meta">
                  <strong>Sector:</strong> ${project.sector}
                </div>
              ` : ''}
              ${project.cup ? `
                <div class="project-meta">
                  <strong>CUP:</strong> ${project.cup}
                </div>
              ` : ''}
              <p class="project-description">
                ${project.description}
              </p>
              ${project.outputs && project.outputs.length > 0 ? `
                <div class="project-outputs">
                  <strong>Outputs:</strong>
                  <ul>
                    ${project.outputs.map(output => `
                      <li>${output}</li>
                    `).join('')}
                  </ul>
                </div>
              ` : ''}
            </div>
          `).join('');
          pastContainer.innerHTML = pastHTML;
          console.log('[projects.html] ✅ Past projects displayed!', projectsData.past.length, 'projects');
        } else {
          pastContainer.innerHTML = '';
          console.log('[projects.html] ℹ️ No past projects found');
        }

      } catch (error) {
        console.error('[projects.html] ❌ Error loading projects data:', error);
        document.getElementById('current-projects-container').innerHTML =
          '<p class="error-message">Error loading project data.</p>';
        document.getElementById('past-projects-container').innerHTML =
          '<p class="error-message">Error loading project data.</p>';
      }
    });
  </script>
</body>
</html>
