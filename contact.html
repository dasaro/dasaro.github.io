<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
  <meta name="description" content="Contact Fabio Aurelio D'Asaro - Email, social media, and professional profiles.">
  <meta name="author" content="Fabio Aurelio D'Asaro">

  <title>Contact - Fabio Aurelio D'Asaro</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/responsive.css">

</head>
<body data-page="contact">
  <!-- Mathematical Background Canvas -->
  <canvas id="bg-animation-canvas" data-default-animation="primes"></canvas>
  <button id="animation-toggle" class="animation-toggle" aria-label="Toggle background animation" title="Toggle animation (A)">
    <span class="symbol">∀</span>
  </button>

  <!-- Navigation (dynamically injected by navigation.js) -->
  <div id="nav-placeholder"></div>

  <!-- Main Content -->
  <main>
    <section id="contact">
      <div class="container">
        <h1 class="fade-in">Contact</h1>

        <div class="contact-grid">
          <!-- Email -->
          <div class="contact-card fade-in-delay-1">
            <h3>∃ Email</h3>
            <div class="contact-item">
              <span class="contact-icon">@</span>
              <div>
                <div>
                  <strong>Primary:</strong><br>
                  <a href="mailto:fabioaurelio.dasaro@unisalento.it" class="contact-link">
                    fabioaurelio.dasaro@unisalento.it
                  </a>
                  <button class="copy-btn" onclick="copyToClipboard('fabioaurelio.dasaro@unisalento.it', this)">
                    Copy
                  </button>
                </div>
                <div class="mt-sm">
                  <strong>Institutional:</strong><br>
                  <a href="mailto:fabioaurelio.dasaro@univr.it" class="contact-link">
                    fabioaurelio.dasaro@univr.it
                  </a>
                  <button class="copy-btn" onclick="copyToClipboard('fabioaurelio.dasaro@univr.it', this)">
                    Copy
                  </button>
                </div>
                <div class="mt-sm">
                  <a href="mailto:fabio.d'asaro.14@ucl.ac.uk" class="contact-link">
                    fabio.d'asaro.14@ucl.ac.uk
                  </a>
                  <button class="copy-btn" onclick="copyToClipboard('fabio.d\'asaro.14@ucl.ac.uk', this)">
                    Copy
                  </button>
                </div>
                <div class="mt-sm">
                  <strong>Personal:</strong><br>
                  <a href="mailto:fdasaro@gmail.com" class="contact-link">
                    fdasaro@gmail.com
                  </a>
                  <button class="copy-btn" onclick="copyToClipboard('fdasaro@gmail.com', this)">
                    Copy
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Phone -->
          <div class="contact-card fade-in-delay-2">
            <h3>∀ Phone</h3>
            <div class="contact-item">
              <span class="contact-icon">☎</span>
              <div>
                <a href="tel:+393473001762" class="contact-link">+39 347 300 1762</a>
                <button class="copy-btn" onclick="copyToClipboard('+39 347 300 1762', this)">
                  Copy
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Academic Profiles -->
        <div class="card mt-xl fade-in-delay-3">
          <h2 class="section-title">Academic & Professional Profiles</h2>
          <div class="profile-links">
            <a href="https://github.com/dasaro" target="_blank" rel="noopener" class="profile-link">
              <span>→</span> GitHub
            </a>
            <a href="https://scholar.google.com" target="_blank" rel="noopener" class="profile-link">
              <span>→</span> Google Scholar
            </a>
            <a href="https://sites.google.com/view/fdasaro" target="_blank" rel="noopener" class="profile-link">
              <span>→</span> Personal Website
            </a>
            <a href="https://orcid.org" target="_blank" rel="noopener" class="profile-link">
              <span>→</span> ORCID
            </a>
            <a href="https://www.researchgate.net" target="_blank" rel="noopener" class="profile-link">
              <span>→</span> ResearchGate
            </a>
          </div>
        </div>

        <!-- Location -->
        <div class="location-info fade-in">
          <h2 class="section-title">Location</h2>
          <div id="affiliations-container" class="grid grid-2">
            <p class="loading-message">Loading affiliations...</p>
          </div>
          <p class="mt-md" id="birthplace-container">
            <span class="logic-symbol">⊢</span>
            <em>Birthplace:</em> <span id="birthplace-text">—</span>
          </p>
        </div>

        <!-- Get in Touch -->
        <div class="card mt-xl">
          <h2 class="section-title">Get in Touch</h2>
          <p>
            I'm always happy to discuss research collaborations, potential projects, or opportunities
            for student supervision. Feel free to reach out via email or connect with me on any of
            the platforms listed above.
          </p>
          <p class="mt-md">
            For prospective PhD students, please see the <a href="teaching.html#prospective-students">
            Teaching page</a> for information about research opportunities.
          </p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-content">
      <div class="footer-text">
        <p>&copy; <span class="footer-year">2025</span> <span id="footer-name">Loading...</span></p>
        <p>∀x (Logic(x) → Elegant(x))</p>
      </div>
      <ul class="footer-links">
        <li><a href="https://github.com/dasaro" target="_blank" rel="noopener">GitHub</a></li>
        <li><a href="https://scholar.google.com" target="_blank" rel="noopener">Google Scholar</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>
  </footer>

  <!-- Scripts -->
    <script src="js/navigation.js?v=31"></script>
  <script src="js/main.js?v=31"></script>
  <script type="module" src="js/animations/AnimationController.js?v=31"></script>
  <script src="js/logical-symbols.js?v=31"></script>

  <script>
    // Copy to clipboard function
    function copyToClipboard(text, button) {
      navigator.clipboard.writeText(text).then(() => {
        const originalText = button.textContent;
        button.textContent = 'Copied!';
        button.classList.add('copied');

        setTimeout(() => {
          button.textContent = originalText;
          button.classList.remove('copied');
        }, 2000);
      }).catch(err => {
        console.error('Failed to copy:', err);
        button.textContent = 'Error';
      });
    }

    // Load affiliations and birthplace from JSON
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // Load experience data for affiliations
        const experienceData = await loadJSON('./data/experience.json', 'Contact');
        const personalData = await loadJSON('./data/personal.json', 'Contact');

        // Load current affiliations (positions where current: true)
        const currentPositions = experienceData?.positions?.filter(p => p.current) || [];

        const affiliationsContainer = document.getElementById('affiliations-container');

        if (currentPositions.length > 0 && affiliationsContainer) {
          const html = currentPositions.map((pos, index) => `
            <div>
              <h3>${index === 0 ? 'Primary' : 'Secondary'} Affiliation</h3>
              <p><strong>${pos.institution}</strong></p>
              <p>${pos.department}</p>
              <p>${pos.location}</p>
            </div>
          `).join('');

          affiliationsContainer.innerHTML = html;
          console.log('[Contact] ✓ Loaded', currentPositions.length, 'current affiliations');
        } else if (affiliationsContainer) {
          affiliationsContainer.innerHTML = '<p>No current affiliations found.</p>';
        }

        // Load birthplace
        const birthplaceText = document.getElementById('birthplace-text');
        if (birthplaceText && personalData?.birthplace) {
          birthplaceText.textContent = personalData.birthplace;
          console.log('[Contact] ✓ Loaded birthplace');
        }

      } catch (error) {
        console.error('[Contact] Error loading affiliations:', error);
      }
    });
  </script>
</body>
</html>
